# ๐ MasterGrader

ุณุณุชู ุฌุงูุน ู ุญุฑููโุง ุจุฑุง ุชุตุญุญ ุฎูุฏฺฉุงุฑ ุชูุฑูุงุช ุจุฑูุงููโููุณ C ู ุชุดุฎุต ุชููุจ ูพุดุฑูุชู

## ๐ ูฺฺฏโูุง

### โจ ูุงุจูุชโูุง ุงุตู

1. **ุงุณุชุฎุฑุงุฌ ุจุงุฒฺฏุดุช ูุงูโูุง ZIP (Sandbox Extraction)**
   - ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุชูุงู ูุงูโูุง ูุดุฑุฏู (ุญุช ุชู ุฏุฑ ุชู)
   - ุงุณุชุฎุฑุงุฌ ุฏุฑ ูพูุดูโูุง ูููุช (ุจุฏูู ุชุบุฑ ูุงูโูุง ุงุตู)
   - ูพุดุชุจุงู ุงุฒ ZIPุ RAR ู 7Z
   - ูุฏุฑุช ุฎุทุง ู ุงุฏุงูู ฺฉุงุฑ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู
   - ูุงุฏุฏู ฺฏุฑูุชู ูุงูโูุง ุณุณุชู (ูุซู `__MACOSX`)

2. **ูฺฏุงุดุช ููุดููุฏ ูุงูโูุง**
   - ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุณูุงู ูุฑุจูุท ุจู ูุฑ ูุงู ุจุง ุงูฺฏูุฑุชูโูุง ููุฑุณุชฺฉ
   - ูพุดุชุจุงู ุงุฒ ูุงูโฺฏุฐุงุฑโูุง ูุฎุชูู (q1.c, soal1.c, 1.c, ...)
   - ุงุณุชุฑุงุชฺ Fallback ุจุฑุง ูุงูโูุง ูุงูุดุฎุต
   - ูุฑุชุจโุณุงุฒ ุฎูุฏฺฉุงุฑ ุจุฑ ุงุณุงุณ ูุงู ูุงู ุฏุฑ ุตูุฑุช ุนุฏู ุชุทุจู

3. **ุชุดุฎุต ุชููุจ ูพุดุฑูุชู**
   - ุชูฺฉูโุณุงุฒ ููุดููุฏ ฺฉุฏ C (ูู ููุงุณู ูุชู ุณุงุฏู)
   - ูุฑุชุจโุณุงุฒ ุชูุงุจุน ุจุฑุง ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ุชุบุฑ ุชุฑุชุจ
   - ุญุฐู ฺฉุฏูุง ูุงูุจ (Template Code Subtraction)
   - ูุงุฏุฏู ฺฏุฑูุชู ุชุบุฑ ูุงู ูุชุบุฑูุง
   - ุญุฐู ฺฉุงููุชโูุง ู #include ูุง
   - ุชุจุฏู ุงุนุฏุงุฏ ู ุฑุดุชูโูุง ุจู ุชูฺฉูโูุง ุนููู
   - ููุชุฑ ฺฉุฏูุง ฺฉูุชุงู ุจุฑุง ุฌููฺฏุฑ ุงุฒ False Positive
   - ุฎูุดูโุจูุฏ ุชููุจ (Clustering) ุจุฑุง ุดูุงุณุง ุจุงูุฏูุง ุชููุจ

4. **ฺฏุฒุงุฑุดโุฏู ุฌุงูุน**
   - ฺฏุฒุงุฑุด CSV ุจุง ุงูฺฉูุฏูฺฏ UTF-8-SIG (ุณุงุฒฺฏุงุฑ ุจุง ุงฺฉุณู)
   - ฺฏุฒุงุฑุด ุชูุตู ูุชู
   - ฺฏุฒุงุฑุด HTML ุจุง Side-by-Side Diff ุจุฑุง ูุฑ ุฌูุช ูุชููุจ
   - ฺฏุฒุงุฑุด ุฎูุดูโูุง ุชููุจ (Clusters Report)
   - ุฎุฑูุฌ ฺฉูุณูู ุจุง ุขูุงุฑ ฺฉุงูู
   - ูุงู ูุงฺฏ ุจุฑุง ุฎุทุงูุง

5. **ุฑุงุจุท ฺฉุงุฑุจุฑ ุฏุณุชูุฑ (CLI)**
   - ูพุดุชุจุงู ุงุฒ ุขุฑฺฏููุงูโูุง ุฎุท ูุฑูุงู
   - ุชูุธูุงุช ุงูุนุทุงูโูพุฐุฑ ุฏุฑ ุฒูุงู ุงุฌุฑุง
   - ุฑุงูููุง ุงุณุชูุงุฏู ฺฉุงูู

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- Python 3.7 ุง ุจุงูุงุชุฑ
- ฺฉุชุงุจุฎุงููโูุง ุงุถุงู (ุงุฎุชุงุฑ ุงูุง ุชูุตู ูโุดูุฏ):
  - `patoolib` - ุจุฑุง ูพุดุชุจุงู ุงุฒ RAR ู 7Z
  - `networkx` - ุจุฑุง ุฎูุดูโุจูุฏ ูพุดุฑูุชู

### ูุตุจ

1. ฺฉููู ุง ุฏุงูููุฏ ูพุฑูฺู:
```bash
git clone <repository-url>
cd MasterGrader
```

2. ูุตุจ ูุงุจุณุชฺฏโูุง:
```bash
pip install -r requirements.txt
```

ุง ูุตุจ ุฏุณุช:
```bash
pip install patoolib networkx
```

3. ุจุฑุฑุณ ุชูุธูุงุช ุฏุฑ ูุงู `config.py`:
   - `ROOT_DIR`: ูุณุฑ ูพูุดู ุฏุงูุดุฌูุงู
   - `OUTPUT_DIR`: ูุณุฑ ุฎุฑูุฌ
   - `NUM_QUESTIONS`: ุชุนุฏุงุฏ ุณูุงูุงุช
   - `SIMILARITY_THRESHOLD`: ุขุณุชุงูู ุดุจุงูุช (ุฏุฑุตุฏ)
   - `TEMPLATE_CODE_PATH`: ูุณุฑ ูุงู ฺฉุฏ ูุงูุจ (ุงุฎุชุงุฑ)

## ๐ ุงุณุชูุงุฏู

### ุงุฌุฑุง ุณุงุฏู (ุจุง ุชูุธูุงุช ูพุดโูุฑุถ)

```bash
python main.py
```

### ุงุณุชูุงุฏู ุจุง ุขุฑฺฏููุงูโูุง ุฎุท ูุฑูุงู

```bash
# ุจุง ูุณุฑูุง ุณูุงุฑุด
python main.py --input "C:/submissions" --output "C:/results"

# ุจุง ุขุณุชุงูู ุดุจุงูุช ุณูุงุฑุด
python main.py --input "C:/submissions" --threshold 90

# ุจุง ูุงู ูุงูุจ
python main.py --input "C:/submissions" --template "template.c"

# ุจุง ุชุนุฏุงุฏ ุณูุงูุงุช ุณูุงุฑุด
python main.py --input "C:/submissions" --questions 8

# ุชุฑฺฉุจ ฺูุฏ ุขุฑฺฏููุงู
python main.py --input "C:/submissions" --output "C:/results" --threshold 90 --template "template.c"
```

### ุฑุงูููุง ุขุฑฺฏููุงูโูุง

```
--input, -i     ูุณุฑ ูพูุดู ูุฑูุฏ ุฏุงูุดุฌูุงู
--output, -o    ูุณุฑ ูพูุดู ุฎุฑูุฌ
--threshold, -t ุขุณุชุงูู ุดุจุงูุช ุจุฑุง ุชุดุฎุต ุชููุจ (ุฏุฑุตุฏ)
--template, -T  ูุณุฑ ูุงู ฺฉุฏ ูุงูุจ (ุจุฑุง ุญุฐู ฺฉุฏูุง ุขูุงุฏู)
--questions, -q ุชุนุฏุงุฏ ุณูุงูุงุช
--help, -h      ููุงุด ุฑุงูููุง
```

### ุณุงุฎุชุงุฑ ูพูุดู ูุฑูุฏ

```
ROOT_DIR/
โโโ 123456789/          # ุดูุงุฑู ุฏุงูุดุฌู
โ   โโโ assignment.zip
โ   โโโ ...
โโโ 987654321/
โ   โโโ ...
โโโ ...
```

### ุณุงุฎุชุงุฑ ูพูุดู ุฎุฑูุฌ

```
OUTPUT_DIR/
โโโ Q1/
โ   โโโ 123456789.c
โ   โโโ 987654321.c
โ   โโโ ...
โโโ Q2/
โ   โโโ ...
โโโ ...
โโโ HTML_Reports/           # ฺฏุฒุงุฑุดโูุง HTML Diff
โ   โโโ Q1_123456789_vs_987654321.html
โ   โโโ ...
โโโ Plagiarism_Report.csv   # ฺฏุฒุงุฑุด ุงุตู ุชููุจ
โโโ Clusters_Report.csv     # ฺฏุฒุงุฑุด ุฎูุดูโูุง ุชููุจ
โโโ Detailed_Report.txt     # ฺฏุฒุงุฑุด ุชูุตู
โโโ ...
```

## โ๏ธ ุชูุธูุงุช

ุชูุงู ุชูุธูุงุช ุฏุฑ ูุงู `config.py` ูุงุจู ุชุบุฑ ุงุณุช:

```python
# ูุณุฑูุง
ROOT_DIR = r"F:\assignment_94318_submissions_by_user"
OUTPUT_DIR = r"./Smart_Organized_Submissions"
TEMPLATE_CODE_PATH = None  # ูุณุฑ ูุงู ฺฉุฏ ูุงูุจ (ุงุฎุชุงุฑ)

# ูพุงุฑุงูุชุฑูุง ุชุตุญุญ
NUM_QUESTIONS = 6
SIMILARITY_THRESHOLD = 85.0  # ุฏุฑุตุฏ
MIN_TOKEN_COUNT = 50  # ุญุฏุงูู ุชูฺฉู ุจุฑุง ุจุฑุฑุณ

# ุชูุธูุงุช ุงุณุชุฎุฑุงุฌ
MAX_EXTRACTION_DEPTH = 10
IGNORE_PATTERNS = ['__MACOSX', '.DS_Store', 'Thumbs.db', '.git']
```

## ๐ ุฎุฑูุฌโูุง

### 1. ูุงู CSV (Plagiarism_Report.csv)

ุฌุฏูู ุดุงูู:
- Question: ุดูุงุฑู ุณูุงู
- Student 1: ุดูุงุฑู ุฏุงูุดุฌู ุงูู
- Student 2: ุดูุงุฑู ุฏุงูุดุฌู ุฏูู
- Similarity %: ุฏุฑุตุฏ ุดุจุงูุช
- HTML Report: ููฺฉ ุจู ฺฏุฒุงุฑุด HTML Diff

### 2. ฺฏุฒุงุฑุด ุฎูุดูโูุง ุชููุจ (Clusters_Report.csv)

ุฌุฏูู ุดุงูู:
- Cluster ID: ุดูุงุณู ุฎูุดู
- Size: ุชุนุฏุงุฏ ุฏุงูุดุฌูุงู ุฏุฑ ุฎูุดู
- Students: ูุณุช ุฏุงูุดุฌูุงู (ุฌุฏุง ุดุฏู ุจุง ฺฉุงูุง)

### 3. ฺฏุฒุงุฑุด HTML Diff

ุจุฑุง ูุฑ ุฌูุช ูุชููุจ (ุจุง ุดุจุงูุช ุจุงูุง ุขุณุชุงูู)ุ ฺฉ ูุงู HTML ุชููุฏ ูโุดูุฏ ฺฉู:
- ฺฉุฏ ุฏู ุฏุงูุดุฌู ุฑุง ฺฉูุงุฑ ูู ููุงุด ูโุฏูุฏ
- ุชูุงูุชโูุง ุฑุง ุจุง ุฑูฺฏโูุง ูุฎุชูู ูุงูุงุช ูโฺฉูุฏ
- ูุงุจูุช ูุดุงูุฏู ุฏุฑ ูุฑูุฑฺฏุฑ

### 4. ฺฏุฒุงุฑุด ุชูุตู (Detailed_Report.txt)

ฺฏุฒุงุฑุด ฺฉุงูู ุจุง:
- ุขูุงุฑ ฺฉู
- ุชูุฒุน ุจุฑ ุงุณุงุณ ุณูุงู
- ุชูุฒุน ุฏุฑุตุฏ ุดุจุงูุช
- ูุณุช ุฎูุดูโูุง ุชููุจ
- ุฌุฒุฆุงุช ุชูุงู ููุงุฑุฏ ุชููุจ

### 5. ูุงู ูุงฺฏ (logs/logs.txt)

ุซุจุช ุชูุงู ุฎุทุงูุง ู ูุดฺฉูุงุช ุฏุฑ ุญู ุงุฌุฑุง

## ๐ง ูุนูุงุฑ

ูพุฑูฺู ุจู ุตูุฑุช ูุงฺููุงุฑ ุทุฑุงุญ ุดุฏู ุงุณุช:

- **config.py**: ูุฏุฑุช ุชูุธูุงุช ู ูพฺฉุฑุจูุฏ
- **extractor.py**: ุงุณุชุฎุฑุงุฌ ุจุงุฒฺฏุดุช ูุงูโูุง ZIP (Sandbox)
- **file_mapper.py**: ูฺฏุงุดุช ููุดููุฏ ูุงูโูุง ุจู ุณูุงูุงุช
- **tokenizer.py**: ุชูฺฉูโุณุงุฒ ูพุดุฑูุชู ฺฉุฏ C ุจุง ูุฑุชุจโุณุงุฒ ุชูุงุจุน
- **plagiarism_detector.py**: ุชุดุฎุต ุชููุจ ุจุง Template Subtraction ู Clustering
- **reporter.py**: ุชููุฏ ฺฏุฒุงุฑุดโูุง CSVุ HTML ู ูุชู
- **main.py**: ููุงููฺฏโฺฉููุฏู ุงุตู ุจุง CLI

## ๐ฏ ุงูฺฏูุฑุชู ุชุดุฎุต ุชููุจ

### 1. ุชูฺฉูโุณุงุฒ ูพุดุฑูุชู:
   - ุญุฐู ฺฉุงููุชโูุง ู #include ูุง
   - ูุฑุชุจโุณุงุฒ ุชูุงุจุน ุจุฑ ุงุณุงุณ ูุงู (ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ุชุบุฑ ุชุฑุชุจ)
   - ุชุจุฏู ุงุนุฏุงุฏ ุจู `NUM`
   - ุชุจุฏู ุฑุดุชูโูุง ุจู `STR`
   - ุชุจุฏู ูุชุบุฑูุง ุจู `ID`
   - ุญูุธ ฺฉููุงุช ฺฉูุฏ ู ุนููฺฏุฑูุง

### 2. ุญุฐู ฺฉุฏ ูุงูุจ (Template Subtraction):
   - ุจุงุฑฺฏุฐุงุฑ ูุงู ูุงูุจ (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
   - ุญุฐู ุชูฺฉูโูุง ูุดุชุฑฺฉ ุจุง ูุงูุจ ุงุฒ ฺฉุฏ ุฏุงูุดุฌู
   - ุฌููฺฏุฑ ุงุฒ False Positive ุฑู ฺฉุฏูุง ุขูุงุฏู ุงุณุชุงุฏ

### 3. ููุงุณู:
   - ุงุณุชูุงุฏู ุงุฒ `SequenceMatcher` ุจุฑุง ูุญุงุณุจู ุดุจุงูุช
   - ููุชุฑ ฺฉุฏูุง ฺฉูุชุงู (ฺฉูุชุฑ ุงุฒ MIN_TOKEN_COUNT)
   - ฺฉุด ฺฉุฑุฏู ูุชุงุฌ ุจุฑุง ุจูููโุณุงุฒ
   - ููุงุณู ููุท ูุงูโูุง ูุนุชุจุฑ

### 4. ุฎูุดูโุจูุฏ:
   - ุณุงุฎุช ฺฏุฑุงู ุงุฒ ุฑูุงุจุท ุชููุจ
   - ูพุฏุง ฺฉุฑุฏู Connected Components (ุฎูุดูโูุง)
   - ุดูุงุณุง ุจุงูุฏูุง ุชููุจ

### 5. ฺฏุฒุงุฑุด:
   - ููุท ููุงุฑุฏ ุจุงูุงุชุฑ ุงุฒ ุขุณุชุงูู ฺฏุฒุงุฑุด ูโุดููุฏ
   - ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ ุณูุงู ู ุดุจุงูุช
   - ุชููุฏ ฺฏุฒุงุฑุด HTML ุจุฑุง ูุฑ ุฌูุช

## ๐ ูฺฺฏโูุง ุงููุช

1. **Sandbox Extraction**: ูุงูโูุง ุงุตู ูฺโฺฏุงู ุชุบุฑ ููโฺฉููุฏ
2. **Template Subtraction**: ุญุฐู ฺฉุฏูุง ุขูุงุฏู ุจุฑุง ุฌููฺฏุฑ ุงุฒ False Positive
3. **Function Sorting**: ููุงููุช ุฏุฑ ุจุฑุงุจุฑ ุชุบุฑ ุชุฑุชุจ ุชูุงุจุน
4. **Token-based Comparison**: ุชุดุฎุต ุฏููโุชุฑ ุงุฒ ููุงุณู ูุชู ุณุงุฏู

## โ๏ธ ูฺฉุงุช ููู

- ุจุฑูุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูพูุดูโูุง ุฎุฑูุฌ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ
- ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุง ุฏุฑ ุงุณุชุฎุฑุงุฌ ฺฉ ูุงูุ ุจุฑูุงูู ุงุฏุงูู ูโุฏูุฏ
- ูุงูโูุง ุฑูุฒุฏุงุฑ ุง ุฎุฑุงุจ ุฏุฑ ูุงฺฏ ุซุจุช ูโุดููุฏ
- ุจุฑูุงูู ุงุฒ ฺฉุฑุด ุฌููฺฏุฑ ูโฺฉูุฏ ู ุฎุทุงูุง ุฑุง ูุฏุฑุช ูโฺฉูุฏ
- ูพูุดูโูุง ูููุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูพุงฺฉ ูโุดููุฏ
- ุงฺฏุฑ `patoolib` ูุตุจ ูุดุฏู ุจุงุดุฏุ ูุงูโูุง RAR/7Z ูพุดุชุจุงู ููโุดููุฏ
- ุงฺฏุฑ `networkx` ูุตุจ ูุดุฏู ุจุงุดุฏุ ุงุฒ ุงูฺฏูุฑุชู ุณุงุฏู DFS ุจุฑุง ุฎูุดูโุจูุฏ ุงุณุชูุงุฏู ูโุดูุฏ

## ๐ ุนุจโุงุจ

### ูุดฺฉู: ูุณุฑ ูุฑูุฏ ูพุฏุง ููโุดูุฏ

- ุจุฑุฑุณ ฺฉูุฏ ฺฉู `ROOT_DIR` ุฏุฑ `config.py` ุตุญุญ ุงุณุช
- ุง ุงุฒ ุขุฑฺฏููุงู `--input` ุงุณุชูุงุฏู ฺฉูุฏ
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุณุฑ ูุฌูุฏ ุฏุงุฑุฏ

### ูุดฺฉู: ูุงูโูุง ุณุงุฒูุงูุฏู ููโุดููุฏ

- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุงูโูุง C ุจุง ูพุณููุฏ `.c` ุง `.cpp` ูุณุชูุฏ
- ูุงฺฏโูุง ุฑุง ุจุฑุง ุฎุทุงูุง ุจุฑุฑุณ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ ฺฉู ูุงูโูุง ZIP ุจู ุฏุฑุณุช ุงุณุชุฎุฑุงุฌ ุดุฏูโุงูุฏ

### ูุดฺฉู: ููุงุฑุฏ ุชููุจ ุดูุงุณุง ููโุดููุฏ

- ุขุณุชุงูู ุดุจุงูุช ุฑุง ุฏุฑ `config.py` ฺฉุงูุด ุฏูุฏ
- ุง ุงุฒ ุขุฑฺฏููุงู `--threshold` ุงุณุชูุงุฏู ฺฉูุฏ
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุงูโูุง ุจู ุฏุฑุณุช ุณุงุฒูุงูุฏู ุดุฏูโุงูุฏ
- ูุทูุฆู ุดูุฏ ฺฉู ุชุนุฏุงุฏ ุชูฺฉูโูุง ุงุฒ `MIN_TOKEN_COUNT` ุจุดุชุฑ ุงุณุช

### ูุดฺฉู: ูุงูโูุง RAR/7Z ุงุณุชุฎุฑุงุฌ ููโุดููุฏ

- ูุตุจ ฺฉูุฏ: `pip install patoolib`
- ุง ุจุฑุง RAR: `pip install rarfile`

### ูุดฺฉู: ุฎูุดูโุจูุฏ ฺฉุงุฑ ููโฺฉูุฏ

- ูุตุจ ฺฉูุฏ: `pip install networkx`
- ุฏุฑ ุตูุฑุช ุนุฏู ูุตุจุ ุงุฒ ุงูฺฏูุฑุชู ุณุงุฏู ุงุณุชูุงุฏู ูโุดูุฏ

## ๐ ูุซุงูโูุง ุงุณุชูุงุฏู

### ูุซุงู 1: ุงุฌุฑุง ุณุงุฏู
```bash
python main.py
```

### ูุซุงู 2: ุจุง ูุณุฑูุง ุณูุงุฑุด
```bash
python main.py --input "D:/Assignments/Submissions" --output "D:/Results"
```

### ูุซุงู 3: ุจุง ูุงู ูุงูุจ
```bash
python main.py --input "D:/Submissions" --template "D:/Templates/template.c"
```

### ูุซุงู 4: ุจุง ุขุณุชุงูู ูพุงูโุชุฑ
```bash
python main.py --input "D:/Submissions" --threshold 80
```

## ๐ ูุณุฎูโูุง

### ูุณุฎู 2.0 (Production Ready)
- โ Sandbox Extraction
- โ Template Code Subtraction
- โ HTML Diff Reports
- โ Function Sorting
- โ RAR/7Z Support
- โ Clustering
- โ CLI ุจุง argparse

### ูุณุฎู 1.0
- ุงุณุชุฎุฑุงุฌ ู ุณุงุฒูุงูุฏู ูพุงู
- ุชุดุฎุต ุชููุจ ุจุง ุชูฺฉูโุณุงุฒ

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุจุฑุง ุงุณุชูุงุฏู ุขููุฒุด ู ุฏุงูุดฺฏุงู ุทุฑุงุญ ุดุฏู ุงุณุช.

## ๐จโ๐ป ุชูุณุนูโุฏููุฏู

ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุฑุง ุฏุณุชุงุฑุงู ุขููุฒุด (TA)

---

**ูฺฉุชู**: ุงู ุณุณุชู ุจุฑุง ฺฉูฺฉ ุจู ุชุดุฎุต ุชููุจ ุทุฑุงุญ ุดุฏู ุงุณุชุ ุงูุง ุชุตูู ููุง ุจุฑ ุนูุฏู ุงุณุชุงุฏ ุงุณุช.

**ุชูุตู**: ููุดู ฺฏุฒุงุฑุดโูุง HTML ุฑุง ุจุฑุฑุณ ฺฉูุฏ ุชุง ุงุฒ ุตุญุช ุชุดุฎุต ุงุทููุงู ุญุงุตู ฺฉูุฏ.
